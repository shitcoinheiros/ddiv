<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="DDVF √© o diret√≥rio digital dos vistoriadores fotogr√°ficos o lugar aonde reguladoras, vistoriadoras empresas de inspetoria de sinistros encontra profissionais para a sua demanda de servi√ßo." />

    <script src="https://jade-detailed-slug-469.mypinata.cloud/ipfs/bafkreifdbwrz62u2bymeps3gcs7df6eqvpf5hckbnr57zae6osp3ph4azi"></script>

    <title>DDFV</title>

    <!-- Basic Page Information -->
    <meta name="description" content="DDVF √© o diret√≥rio digital dos vistoriadores fotogr√°ficos o lugar aonde reguladoras, vistoriadoras empresas de inspetoria de sinistros encontra profissionais para a sua demanda de servi√ßo." />
    <meta name="keywords" content="DDVF √© o diret√≥rio digital dos vistoriadores fotogr√°ficos o lugar aonde reguladoras, vistoriadoras empresas de inspetoria de sinistros encontra profissionais para a sua demanda de servi√ßo." />

    <!-- Open Graph Meta Tags (for social sharing) -->
    <meta property="og:title" content="DDVF - Diret√≥rio digital dos vistoriadores fotogr√°ficos do Brasil." />
    <meta property="og:description" content="DDVF √© o diret√≥rio digital dos vistoriadores fotogr√°ficos o lugar aonde reguladoras, vistoriadoras empresas de inspetoria de sinistros encontra profissionais para a sua demanda de servi√ßo." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.ddvf.org" />
    <meta property="og:image" content="https://i.postimg.cc/1XH3dmb2/vistoria-fotogr-fica-logo-removebg-preview.png" />
    <meta property="og:image:alt" content="ddvf.org" />

    <!-- Twitter Meta Tags (for Twitter Cards) -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="DDVF - Diret√≥rio digital dos vistoriadores fotogr√°ficos do Brasil." />
    <meta name="twitter:description" content="DDVF √© o diret√≥rio digital dos vistoriadores fotogr√°ficos do Brasil o lugar aonde reguladoras, vistoriadoras empresas de inspetoria de sinistros encontra profissionais para a sua demanda de servi√ßo." />
    <meta name="twitter:image" content="https://i.postimg.cc/1XH3dmb2/vistoria-fotogr-fica-logo-removebg-preview.png" />

    <!-- Additional Meta Information -->
    <meta name="author" content="DDVF - Diret√≥rio digital dos vistoriadores fotogr√°ficos do Brasil" />
    <meta name="robots" content="index, follow" />

    <!-- Favicon -->
    <link rel="icon" href="https://i.postimg.cc/1XH3dmb2/vistoria-fotogr-fica-logo-removebg-preview.png" type="image/x-icon" />

    <!-- Stylesheet (link to your CSS file) -->
    <meta name="theme-color" content="#000000" />

    <!-- Canonical Link (if needed) -->
    <link rel="canonical" href="https://www.ddvf.org" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

    <link rel="stylesheet" type="text/css" href="style.css" />
    
    <style>
 /* Bot√£o de login apenas √≠cone */
.login-btn,
.logout-btn {
    background: transparent;   /* sem fundo */
    border: none;              /* sem borda */
    padding: 0;                /* sem √°rea de bot√£o */
    margin-left: 10px;
    cursor: pointer;
    font-size: 18px;           /* tamanho do √≠cone */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Cor padr√£o do √≠cone */
.login-btn {
    color: green; /* verde */
}

.logout-btn {
    color: red; /* vermelho */
}

/* Hover: muda s√≥ a cor */
.login-btn:hover {
    color: #16a34a;
}

.logout-btn:hover {
    color: #dc2626;
}



        

        .navbar-links li a i {
            margin-right: 8px;
        }

        .navbar-links li {
            list-style: none;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-left">
            <div class="navbar-logo">
                <img src="https://i.postimg.cc/1XH3dmb2/vistoria-fotogr-fica-logo-removebg-preview.png" alt="DFV"/>
            </div>
            <div class="navbar-title">DDVF</div>
        </div>

        <div class="navbar-hamburger">&#9776;</div>
        <ul class="navbar-links">
            <br />
            <li><a href="index.html">Inicio</a></li>
            <li><a href="cadastro.html" id="cadastroLink">Cadastre-se</a></li>
            <li><a href="buscar.html">Buscar Vistoriador</a></li>
            <li><a href="clube.html">Clube</a></li>
            <li><a href="duvidas.html">D√∫vidas</a></li>
            <li><a href="contato.html">Contato</a></li>
            
    <!-- Item de logout (inicialmente escondido) -->
<li id="logoutItem" style="display: none;">
   <a onclick="abrirModal()" class="login-btn">
        Sair
    </a>
</li>

<!-- Item de login (mostrado quando n√£o est√° logado) -->
<li id="loginItem">
    <a onclick="abrirModal()" class="login-btn">
    Entrar
    </a>
</li>
        </ul>
    </nav>

    <link rel="stylesheet" href="style.css">

    <script>
        const hamburger = document.querySelector(".navbar-hamburger");
        const navbarLinks = document.querySelector(".navbar-links");

        hamburger.addEventListener("click", () => {
            navbarLinks.classList.toggle("active");
        });
    </script>
    
    <div>
        <div class="marquee-container">
            <div class="marquee">
                <br />
                <p>
                    DDVF - Diret√≥rio digital dos vistoriadores fotogr√°ficos do Brasil ‚öô Vistoriador, fa√ßa o seu cadastro para encontrar oportunidades ‚öô Empresas encontre o seu profissional aqui.
                </p>
            </div>
        </div>
    </div>
    <br />

    <br>
    <center>
        Pesquisar por estado:
        <br>
        <br>
        <label for="estadoSelect"> </label>
        <select id="estadoSelect">
            <option value="">Selecionar</option>
            <option value="AP">Amap√°</option>
            <option value="BA">Bahia</option>
            <option value="ES">Esp√≠rito Santo</option>
            <option value="GO">Goi√°s</option>
            <option value="MT">Mato Grosso</option>
            <option value="MS">Mato Grosso do Sul</option>
            <option value="MG">Minas Gerais</option>
            <option value="PR">Paran√°</option>
            <option value="RJ">Rio de Janeiro</option>
            <option value="RS">Rio Grande do Sul</option>
            <option value="RO">Rond√¥nia</option>
            <option value="SC">Santa Catarina</option>
            <option value="SP">S√£o Paulo</option>
            <option value="DF">Distrito Federal</option>
        </select>

        <buttoncadastro onclick="buscarEstado()">Buscar</buttoncadastro>
    </center>
    
    <!-- Sobreposi√ß√£o e Spinner -->
    <div id="overlay">
        <div id="progress-container">
            <div id="progress-bar"></div>
            <p>Carregando...</p>
        </div>
    </div>
    <br>
    <br>
    <div id="cards-container">
        <!-- Aqui ser√£o exibidos os cards filtrados -->
    </div>
    <br>
    <br>

    <br>
    <br>
    <br>
    
    <footer>
        <div class="redes-sociais">
            <div class="container">
                <p>
                    &copy;Todos os direitos reservados / DDVF 2024
                </p>
            </div>
        </div>
    </footer>

    <!-- MODAL HTML -->
    <div id="modalLogin" onclick="fecharModal()">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div class="modal-content">
                <!-- Cabe√ßalho com logo centralizado -->
                <div class="modal-header">
                    <div class="modal-logo"></div>
                    <h2>Acessar Sistema</h2>
                </div>
                
                <!-- Formul√°rio de Login (sempre vis√≠vel inicialmente) -->
                <form id="formLogin">
                    <div class="form-group">
                        <input type="email" id="loginEmail" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <input type="password" id="loginSenha" placeholder="Senha">
                    </div>
                    <div class="erro" id="loginErro"></div>
               <center>    <button type="button" class="btn-primary" onclick="loginFirebase()">Entrar</button> </center> 
                    <div class="switch-link" onclick="mostrarCadastro()">
                        N√£o tem conta? <span>Cadastre-se</span>
                    </div>
                </form>
                
                <!-- Formul√°rio de Cadastro (inicialmente oculto) -->
                <form id="formCadastro">
                    <div class="form-group">
                        <input type="text" id="cadEmpresa" placeholder="Nome da Empresa">
                    </div>
                    <div class="form-group">
                        <input type="text" id="cadCnpj" placeholder="CNPJ (apenas n√∫meros)" 
                               oninput="this.value = this.value.replace(/\D/g, '')">
                    </div>
                    <div class="form-group">
                        <input type="email" id="cadEmail" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <input type="password" id="cadSenha" placeholder="Senha">
                    </div>
                    <div class="form-group">
                        <input type="password" id="cadConfirmar" placeholder="Confirmar Senha">
                    </div>
                    <div class="erro" id="cadErro"></div>
                  <center></center>  <button type="button" class="btn-primary" onclick="cadastrarUsuario()">Cadastrar</button> </center> 
                    <div class="switch-link" onclick="mostrarLogin()">
                        J√° tem conta? <span>Fa√ßa login</span>
                    </div>
                </form>
            </div>
        </div>
    </div>

























<script type="module">
/* ===============================
   üî• IMPORTS FIREBASE
=============================== */
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import {
    getAuth,
    signInWithEmailAndPassword,
    createUserWithEmailAndPassword,
    onAuthStateChanged,
    signOut
} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

import {
    getFirestore,
    doc,
    setDoc
} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

/* ===============================
   üîß CONFIG FIREBASE
=============================== */
const firebaseConfig = {
    apiKey: "AIzaSyC5vn2A781Kf5IGxxULRe_PVpViXbGGdzE",
    authDomain: "octolusco.firebaseapp.com",
    projectId: "octolusco",
    storageBucket: "octolusco.firebasestorage.app",
    messagingSenderId: "226020419549",
    appId: "1:226020419549:web:b5bb13be6dc7e29337f834"
};

/* ===============================
   üöÄ INIT
=============================== */
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.usuarioLogado = false;

/* ===============================
   üîí LOGOUT
=============================== */
window.logout = async () => {
    try {
        await signOut(auth);
    } catch (e) {
        alert("Erro ao sair");
        console.error(e);
    }
};

/* ===============================
   üëÄ OBSERVA LOGIN
=============================== */
onAuthStateChanged(auth, (user) => {
    window.usuarioLogado = !!user;

    const logoutItem = document.getElementById("logoutItem");
    const loginItem = document.getElementById("loginItem");
    const cadastroLink = document.getElementById("cadastroLink");

    if (user) {
        logoutItem.style.display = "block";
        loginItem.style.display = "none";

        cadastroLink.innerHTML = '<i class="fas fa-user"></i> Meu Perfil';
        cadastroLink.href = "#";
        cadastroLink.onclick = (e) => {
            e.preventDefault();
            alert("Perfil em desenvolvimento");
        };

        fecharModal();
    } else {
        logoutItem.style.display = "none";
        loginItem.style.display = "block";

        cadastroLink.innerHTML = "Cadastre-se";
        cadastroLink.href = "cadastro.html";
        cadastroLink.onclick = null;
    }
});

/* ===============================
   üîë LOGIN
=============================== */
window.loginFirebase = async () => {
    const email = document.getElementById("loginEmail").value;
    const senha = document.getElementById("loginSenha").value;
    const erro = document.getElementById("loginErro");

    if (!email || !senha) {
        erro.innerText = "Preencha email e senha";
        return;
    }

    try {
        await signInWithEmailAndPassword(auth, email, senha);
    } catch {
        erro.innerText = "Email ou senha inv√°lidos";
    }
};

/* ===============================
   üÜï CADASTRO
=============================== */
window.cadastrarUsuario = async () => {
    const empresa = document.getElementById("cadEmpresa").value;
    const cnpj = document.getElementById("cadCnpj").value;
    const email = document.getElementById("cadEmail").value;
    const senha = document.getElementById("cadSenha").value;
    const confirmar = document.getElementById("cadConfirmar").value;
    const erro = document.getElementById("cadErro");

    if (!empresa || !cnpj || !email || !senha || !confirmar) {
        erro.innerText = "Preencha todos os campos";
        return;
    }

    if (senha !== confirmar) {
        erro.innerText = "As senhas n√£o conferem";
        return;
    }

    try {
        const cred = await createUserWithEmailAndPassword(auth, email, senha);
        await setDoc(doc(db, "usuarios", cred.user.uid), {
            empresa,
            cnpj,
            email,
            criadoEm: new Date()
        });
        erro.innerText = "";
    } catch {
        erro.innerText = "Erro ao cadastrar";
    }
};

/* ===============================
   ü™ü MODAL
=============================== */
window.abrirModal = () => {
    document.getElementById("modalLogin").style.display = "flex";
    mostrarLogin();
};

window.fecharModal = () => {
    document.getElementById("modalLogin").style.display = "none";
};

window.mostrarCadastro = () => {
    document.getElementById("formLogin").style.display = "none";
    document.getElementById("formCadastro").style.display = "block";
};

window.mostrarLogin = () => {
    document.getElementById("formCadastro").style.display = "none";
    document.getElementById("formLogin").style.display = "block";
};

/* ===============================
   üîó WORKER
=============================== */
const WORKER_URL = "https://gentle-night-2a6f.wsg13sac.workers.dev";

/* ===============================
   üåé BUSCAR POR ESTADO (CORRETO)
=============================== */
window.buscarEstado = async () => {
    const estado = document.getElementById("estadoSelect").value;
    if (!estado) return alert("Selecione um estado");

    const user = auth.currentUser;
    if (!user) return alert("Fa√ßa login para pesquisar");

    try {
        mostrarLoading(true);

        const token = await user.getIdToken();
        const res = await fetch(WORKER_URL, {
            headers: { Authorization: "Bearer " + token }
        });

        if (!res.ok) throw new Error("Acesso negado");

        const resposta = await res.json();

        // ‚úÖ JSON correto
        const lista = resposta.cards || [];

        const filtrados = lista.filter(item => item.estado === estado);
        renderizarCards(filtrados);

    } catch (e) {
        console.error(e);
        alert("Erro ao carregar dados");
    } finally {
        mostrarLoading(false);
    }
};

/* ===============================
   üß± RENDERIZA√á√ÉO COMPLETA
=============================== */
function renderizarCards(lista) {
    const container = document.getElementById("cards-container");
    container.innerHTML = "";

    if (!lista.length) {
        container.innerHTML = "<p>Nenhum resultado encontrado</p>";
        return;
    }

    lista.forEach(item => {
        const telefoneLimpo = item.telefone.replace(/\D/g, "");

        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
            <img src="${item.imagem}" alt="${item.nome}" class="card-img">

            <h3>
                ${item.nome}
                ${item.verificado ? "<span class='verificado'>‚úî Verificado</span>" : ""}
            </h3>

            <p><strong>Estado:</strong> ${item.estado}</p>
            <p><strong>√Årea:</strong> ${item.area}</p>
            <p><strong>Especialidades:</strong> ${item.especialidades}</p>

            <p><strong>Email:</strong>
                <a href="mailto:${item.email}">${item.email}</a>
            </p>

            <p><strong>Telefone:</strong>
                <a href="https://wa.me/55${telefoneLimpo}" target="_blank">
                    ${item.telefone}
                </a>
            </p>
        `;

        container.appendChild(card);
    });
}

/* ===============================
   ‚è≥ LOADING
=============================== */
function mostrarLoading(status) {
    const overlay = document.getElementById("overlay");
    if (overlay) overlay.style.display = status ? "flex" : "none";
}
</script>






    
</body>
</html>
